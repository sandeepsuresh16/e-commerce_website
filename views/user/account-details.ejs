<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from portotheme.com/html/wolmart/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Nov 2021 04:58:48 GMT -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>Wolmart-eCart</title>

    <meta name="keywords" content="ecommerce" />
    <meta name="description" content="e-cart.">
    <meta name="sandeep" content="ecart">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/user/assets/images/icons/favicon.png">

    <!-- WebFont.js -->
    <script>
        WebFontConfig = {
            google: { families: ['Poppins:400,500,600,700'] }
        };
        (function (d) {
            var wf = d.createElement('script'), s = d.scripts[0];
            wf.src = 'assets/js/webfont.js';
            wf.async = true;
            s.parentNode.insertBefore(wf, s);
        })(document);
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="preload" href="/user/assets/vendor/fontawesome-free/webfonts/fa-regular-400.woff2" as="font"
        type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/user/assets/vendor/fontawesome-free/webfonts/fa-solid-900.woff2" as="font"
        type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/user/assets/vendor/fontawesome-free/webfonts/fa-brands-400.woff2" as="font"
        type="font/woff2" crossorigin="anonymous">
    <link rel="preload" href="/user/assets/fonts/wolmart87d5.woff?png09e" as="font" type="font/woff"
        crossorigin="anonymous">

    <!-- Vendor CSS -->
    <link rel="stylesheet" type="text/css" href="/user/assets/vendor/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="/user/assets/vendor/swiper/swiper-bundle.min.css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" type="text/css" href="/user/assets/vendor/magnific-popup/magnific-popup.min.css">

    <!-- Default CSS -->
    <link rel="stylesheet" type="text/css" href="/user/assets/css/style.min.css">

    <link rel="stylesheet" href="https://unpkg.com/dropzone/dist/dropzone.css" />
    <link href="https://unpkg.com/cropperjs/dist/cropper.css" rel="stylesheet" />
    <script src="https://unpkg.com/dropzone"></script>
    <script src="https://unpkg.com/cropperjs"></script>
    <style>
        .preview {
          overflow: hidden;
          width: 160px;
          height: 160px;
          margin: 10px;
          border: 1px solid red;
        }
    
        .modal-lg {
          max-width: 1000px !important;
        }
      </style>
</head>

<body class="my-account">
    <div class="page-wrapper">
        <!-- Start of Header -->
        <header class="header">

            <!-- End of Header Top -->

            <div class="header-middle">
                <div class="container">
                    <div class="header-left mr-md-4">
                        <a href="/" class="mobile-menu-toggle  w-icon-hamburger" aria-label="menu-toggle">
                        </a>
                        <a href="/" class="logo ml-lg-0">
                            <img src="/user/assets/images/logo.png" alt="logo" width="144" height="45" />
                        </a>
                        <form method="post" action="/search"
                            class="header-search hs-expanded hs-round d-none d-md-flex input-wrapper">
                            <div class="select-box">
                                <select id="category" name="category">
                                    <option value="">All Categories</option>
                                    <%for(var i=0; i<category.length;i++){%>
                                        <option value="<%=category[i].categoryName.toUpperCase()%>">
                                            <%=category[i].categoryName.toUpperCase()%>
                                        </option>
                                        <%}%>
                                </select>
                            </div>
                            <input type="text" class="form-control" name="search" id="search" placeholder="Search in..."
                                required />
                            <button class="btn btn-search" type="submit"><i class="w-icon-search"></i>
                            </button>
                        </form>
                    </div>
                    <div class="header-right ml-4">
                        <% if(logged){%>
                            <a class="wishlist label-down link d-xs-show" href="/account">
                                <i class="fas fa-user"></i>
                                <span class="wishlist-label d-lg-show">
                                    <%= data.name%>
                                </span>
                            </a>
                            <%}%>
                                <% if(!logged){%>
                                    <div class="mr-2">
                                        <h4><a href="/login">login</a></h4>
                                    </div>
                                    <div>
                                        <h4 class="me-2"><a href="/signup-otp-page">signup</a></h4>
                                    </div>
                                    <%}%>
                                        <% if(logged){%>

                                            <a class="wishlist label-down link d-xs-show" href="/user/wishlist">
                                                <i class="fas fa-heart"><sup style="color: blue;font-size:2rem ;"
                                                        id="wishlistCount">
                                                        <%=wishlistCount%>
                                                    </sup></i>
                                                <span class="wishlist-label d-lg-show">Wishlist</span>
                                            </a>

                                            <a href="/cart" class="wishlist label-down link d-xs-show">
                                                <i class="fas fa-shopping-cart"><sup
                                                        style="color: blue;font-size:2rem ;" id="cartCount">
                                                        <%=cartCount%>
                                                    </sup></i>
                                                <span class="cart-label">Cart</span>
                                            </a>
                                            <a class="wishlist label-down link d-xs-show" href="/logout">
                                                <i class="fas fa-sign-out-alt"></i>
                                                <span class="wishlist-label d-lg-show">logout</span>
                                            </a>

                                            <%}%>

                    </div>
                </div>
            </div>
            <!-- End of Header Middle -->

            <div class="header-bottom sticky-content fix-top sticky-header">
                <div class="container">
                    <div class="inner-wrap">
                        <div class="header-left">
                            <div class="dropdown category-dropdown has-border" data-visible="true">
                                <a href="#" class="category-toggle" role="button" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="true" data-display="static"
                                    title="Browse Categories">
                                    <i class="w-icon-category"></i>
                                    <span>Browse Categories</span>
                                </a>

                                <div class="dropdown-box">
                                    <ul class="menu vertical-menu category-menu">
                                        <%for(var i=0; i<category.length;i++){%>
                                            <li>
                                                <a href="/display-category?categoryName=<%=category[i].categoryName%>">
                                                    <%=category[i].categoryName.toUpperCase()%>
                                                </a>
                                                <ul class="megamenu">
                                                    <li>
                                                        <%for(var j=0; j<category[i].subCategory.length;j++){%>
                                                            <a
                                                                href="/search-subcategory?cat=<%=category[i]%>&subcat=<%=category[i].subCategory[j]%>">
                                                                <h4 class="menu-title">
                                                                    <%=category[i].subCategory[j]%>
                                                                </h4>
                                                            </a><br>
                                                            <%}%>
                                                    </li>
                                                </ul>
                                            </li>
                                            <%}%>
                                    </ul>
                                </div>
                            </div>
                            <nav class="main-nav">
                                <ul class="menu active-underline">
                                    <li>
                                        <a href="/">Home</a>
                                    </li>
                                    <li>
                                        <a href="/shop">Shop</a>
                                    </li>

                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- End of Header -->


        <!-- Start of Main -->
        <main class="main" style="min-height: 90vh;">
            <!-- Start of Page Header -->

            <!-- End of Page Header -->

            <!-- Start of Breadcrumb -->
            <nav class="breadcrumb-nav">
                <div class="container">
                    <ul class="breadcrumb">
                        <li><a href="/">Home</a></li>
                        <li><a href="/account">My-Account</a></li>
                        <li>Account-Details</li>
                    </ul>
                </div>
            </nav>
            <!-- End of Breadcrumb -->

            <!-- Start of PageContent -->
            <div class="page-content">
                <div class="row justify-content-center">
                    <div class="col-md-4">
                        <div class="col-12">
                            <div class="fileinput fileinput-new text-center">
                              <div class="row">
                                <div class="fileinput-new  col-12 mt-5 mb-3">
                                    <img src="/user-profile-img/<%=data._id%>.jpg" width="200px" height="200px" id="chekPreview1" style="background-image: url('/icon-avatar.jpg');">
            
                                  </div>
                                  <h6><b>Change Profile Picture</b></h6>
                                <div class="col-12">
                                  <form action="/profile-image"  method="post" enctype="multipart/form-data">
                                  <span class="btn btn-rose btn-round btn-file">
                                    <input type="file" id="image1" onchange="imageChange(event)"
                                      accept="image/gif, image/jpeg, image/png" name="img1" style="bottom: 0px;" />
                                    <textarea name="image1" id="imageValue1" cols="30" rows="10" hidden></textarea>
                                  </span>
                                  <br><button class="badge bg-primary">Save Change</button>
                                </form>
                                </div>
                              </div>
                            </div>
                          </div>
                    </div>
                    <div class="col-md-5 ps-4 pe-5">
                        <div class="col-12">
                            <h5>UserName</h5>
                        </div>
                        <div class="mb-3 col-12" id="div-name">

                            <input type="text" class="form-control" id="name" value="<%=data.name%>">
                            <p id="name-info"></p>
                            <button class="badge bg-primary" onclick="changeName()"> change username</button>

                        </div>
                        <div class="col-12">
                            <h5>Email-ID</h5>
                        </div>
                        <div class="mb-3 col-12"id="div-email">

                            <input type="email" class="form-control" id="email" value="<%=data.email%>">
                            <p id="email-info"></p>
                            <button class="badge bg-primary" onclick="changeEmail()"> change email-id</button>

                        </div>
                        <div>
                            <h5>Password</h5>
                        </div>
                        <div class="mb-3" id="div-password">

                            <input type="password" class="form-control" id="password">
                            <p id="password-info"></p>
                            <button class="badge bg-primary" onclick="changePassword()"> change password</button>

                        </div>

                    </div>

                </div>
            </div>
            <!-- End of PageContent -->
        </main>
        <!-- End of Main -->

        <!-- Start of Footer -->
        <footer class="footer appear-animate" data-animation-options="{
            'name': 'fadeIn'
        }">
            <div class="footer-newsletter bg-primary">
                <div class="container">
                    <div class="row justify-content-center align-items-center">
                        <div class="icon-box-content text-center col-12">

                            <h5 style="color: #fff;">© Copyright . All Rights Reserved</h5>
                        </div>
                    </div>
                </div>
            </div>

        </footer>
        <!-- End of Footer -->
    </div>
    <!-- End of Page Wrapper -->

    <!-- Start of Sticky Footer -->
    <div class="sticky-footer sticky-content fix-bottom">
        <a href="/" class="sticky-link active">
            <i class="w-icon-home"></i>
            <p>Home</p>
        </a>
        <a href="/shop" class="sticky-link">
            <i class="w-icon-category"></i>
            <p>Shop</p>
        </a>
        <% if(logged){%>
        <a href="/account" class="sticky-link">
            <i class="w-icon-account"></i>
            <p>Account</p>
        </a>
        <a href="/cart" class="sticky-link">
            <i class="w-icon-cart"></i>
            <p>Cart</p>
        </a>
        <a href="/user/wishlist" class="sticky-link">
            <i class="w-icon-heart"></i>
            <p>Wishlist</p>
        </a>
        <%}%>
    </div>
    <!-- End of Sticky Footer -->

    <!-- Start of Scroll Top -->
    <a id="scroll-top" class="scroll-top" href="#top" title="Top" role="button"> <i class="w-icon-angle-up"></i> <svg
            version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70">
            <circle id="progress-indicator" fill="transparent" stroke="#000000" stroke-miterlimit="10" cx="35" cy="35"
                r="34" style="stroke-dasharray: 16.4198, 400;"></circle>
        </svg> </a>
    <!-- End of Scroll Top -->

    <!-- Start of Mobile Menu -->
    <div class="mobile-menu-wrapper">
        <div class="mobile-menu-overlay"></div>
        <!-- End of .mobile-menu-overlay -->

        <a href="#" class="mobile-menu-close"><i class="close-icon"></i></a>
        <!-- End of .mobile-menu-close -->

        <div class="mobile-menu-container scrollable">
            <form action="/product_search" method="post" class="input-wrapper">
                <input type="text" class="form-control" name="search" autocomplete="off" placeholder="Search"
                    required />
                <button class="btn btn-search" type="submit">
                    <i class="w-icon-search"></i>
                </button>
            </form>
            <!-- End of Search Form -->
            <div class="tab">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a href="#main-menu" class="nav-link active">Main Menu</a>
                    </li>
                    <li class="nav-item">
                        <a href="#categories" class="nav-link">Categories</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane active" id="main-menu">
                    <ul class="mobile-menu">
                        <li><a href="/">Home</a></li>
                        <li><a href="/shop">Shop</a></li>
                        <li><a href="/logout">logout</a></li>
                    </ul>
                </div>
                <div class="tab-pane" id="categories">
                    <ul class="mobile-menu">
                        <%for(var i=0; i<category.length;i++){%>
                            <li>
                                <a href="/display-category?categoryName=<%=category[i].categoryName%>">
                                    <%=category[i].categoryName.toUpperCase()%>
                                </a>
                            </li>
                        <%}%>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Mobile Menu -->

    <!-- Plugin JS File -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function deleteAddress(addressId) {
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    $.ajax({
                        url: '/user/address-delete',
                        method: 'post',
                        data: { addressId: addressId },
                        success: (response) => {
                            Swal.fire({
                                icon: 'success',
                                title: 'Address Successfully Deleted'
                            }).then(() => {
                                location.reload()
                            })

                        }
                    })
                }
            })

        }
    </script>

    <script src="/user/assets/vendor/jquery/jquery.min.js"></script>
    <script src="/user/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="/user/assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
    <script src="/user/assets/js/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!--MODAL - ADDRESS EDIT-->

    <!--MODAL - ADDRESS EDIT -  END-->

    <!--Modal - Add Address-->

    <!--Modal End-->



    <script>
        function changeName() {
            let name = document.getElementById('name').value.trim()
            if (name.length < 4) {
                Swal.fire('Name should be minimum 4 characters')
                $("#div-name").load(window.location.href + " #div-name")
            } else {
                Swal.fire({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, delete it!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        $.ajax({
                            url: '/user/name-change',
                            method: 'post',
                            data: { name: name },
                            success: (response) => {
                                if (response.success) {
                                    Swal.fire({
                                        icon: 'success',
                                        title: 'name changed'
                                    })
                                }
                            }
                        })
                    }
                })
            }
        }

        function changePassword() {
            let password = document.getElementById('password').value.trim()
            if (password.length < 4) {
                Swal.fire('Name should be minimum 4 characters')
                $("#div-password").load(window.location.href + " #div-password")
            } else {
                Swal.fire({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, change password!'
                }).then((result) => {
                    if (result.isConfirmed) {
                        $.ajax({
                            url: '/user/password-change',
                            method: 'post',
                            data: { password: password },
                            success: (response) => {
                                if (response.success) {
                                    Swal.fire({
                                        icon: 'success',
                                        title: 'password changed'
                                    })
                                }
                            }
                        })
                    } else {
                        $("#div-password").load(window.location.href + " #div-password")
                    }
                })
            }
        }

        function changeEmail() {
            var reg = /^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;
            let email=document.getElementById('email').value
            if (reg.test(email)) {
                $.ajax({
                    url:'/check-email',
                    method:'post',
                    data:{email:email},
                    success:(response)=>{
                        if(response.success){
                            Swal.fire({
                                title: 'Are you sure?',
                                text: "You won't be able to revert this!",
                                icon: 'warning',
                                showCancelButton: true,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Yes, change email id!'
                            }).then((result)=>{
                                if(result.isConfirmed){
                                    $.ajax({
                                        url:'/change-email',
                                        method:'post',
                                        data:{email:email},
                                        success:(response)=>{
                                            if(response.changed){
                                                Swal.fire({
                                                    title:'email-ID changed successfully',
                                                    icon:'success'
                                                })
                                            }
                                        }
                                    })
                                    
                                }else{
                                    $("#div-email").load(window.location.href + " #div-email")
                                }
                            })
                        }else{
                            Swal.fire('Email already present!')
                            $("#div-email").load(window.location.href + " #div-email")
                        }
                    }
                })
            }else{
                Swal.fire('Please enter a valid email')  
            }
            
            
        }
//         $(document).ready(function() {
//     $('#myform').formValidation({
//         framework: 'bootstrap',
//         excluded: ':disabled',
//         icon: {
//             valid: 'glyphicon glyphicon-ok',
//             invalid: 'glyphicon glyphicon-remove',
//             validating: 'glyphicon glyphicon-refresh'
//         },
//         fields: {
//             name: {
//                 validators: {
//                     notEmpty: {
//                         message: 'The name is required'
//                     }
//                 }
//             },
//             phone: {
//                 validators: {
//                     notEmpty: {
//                         message: 'The password is required'
//                     }
//                 }
//             }
//         }
//     });
// });
        // $(document).ready(function () {
        //     $("#myform").validate({
        //     rules: {
        //             name: {
        //                 requied: true,
        //                 minlength: 4
        //             },
        //             phone: {
        //                 requied: true,
        //                 minlength: 10,
        //                 maxlength: 10,
        //                 Number: true
        //             },
        //             pin: {
        //                 required: true,
        //                 minlength: 6,
        //                 maxlength: 6,
        //                 Number: true
        //             },
        //             address: {
        //                 required: true,
        //                 minlength: 5
        //             }
        //         },
        //         message: {
        //             requied: 'This field is required',
        //             minlength: 'should have a minimum length',

        //         },

        //     submitHandler: function (form) {
        //         form.submit();
        //     }
        // })
        // })

        // $("#myform").validate({

        //     rules: {
        //             name: {
        //                 requied: true,
        //                 minlength: 4
        //             },
        //             phone: {
        //                 requied: true,
        //                 minlength: 10,
        //                 maxlength: 10,
        //                 Number: true
        //             },
        //             pin: {
        //                 required: true,
        //                 minlength: 6,
        //                 maxlength: 6,
        //                 Number: true
        //             },
        //             address: {
        //                 required: true,
        //                 minlength: 5
        //             }
        //         },
        //         message: {
        //             requied: 'This field is required',
        //             minlength: 'should have a minimum length',

        //         },

        //     submitHandler: function (form) {
        //         form.preventDefault()
        //         form.submit();
        //     }
        // });
    </script>
    <script>
        function imageChange(event) {
          var fileInput =
            document.getElementById('image1');
    
          var filePath = fileInput.value;
    
          // Allowing file type
          var allowedExtensions =
            /(\.jpg|\.jpeg|\.png|\.gif)$/i;
    
          if (!allowedExtensions.exec(filePath)) {
            fileInput.value = '';
            Swal.fire('Invalid input format')
            return false;
          }
    
        }
    
      </script>
      <script>
        $('document').ready(function () {
          //modal1 and image 1
          var image1 = document.getElementById('sampleImage1');
    
    
          var modal1 = $('#modal1');
          var cropper1;
    
          $('#image1').change(function (event) {
            var files = event.target.files;
    
            var done = function (url) {
              image1.src = url;
              modal1.modal('show');
            };
    
            if (files && files.length > 0) {
              reader = new FileReader();
              reader.onload = function (event) {
                done(reader.result);
              };
              reader.readAsDataURL(files[0]);
            }
          });
    
          modal1.on('shown.bs.modal', function () {
            cropper1 = new Cropper(image1, {
              // aspectRatio: 1.6 / 1,
              viewMode: 1,
              preview: '#preview1'
            });
          }).on('hidden.bs.modal', function () {
            cropper1.destroy();
            cropper1 = null;
          });
    
          $('#crop1').click(function () {
            canvas = cropper1.getCroppedCanvas({
              width: 550,
              height: 500
            });
    
            canvas.toBlob(function (blob) {
              url = URL.createObjectURL(blob);
              var reader = new FileReader();
              reader.readAsDataURL(blob);
              reader.onloadend = function () {
                var base64data = reader.result;
                modal1.modal('hide');
                $("#imageValue1").val(base64data)
                $('#chekPreview1').attr('src', base64data);
              };
            });
          });
        });
    
      </script>
      <!-- Modal 1-->
  <div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Crop Image Here</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="img-container">
          <div class="row">
            <div class="col-md-8">
              <img src="" id="sampleImage1" />
            </div>
            <div class="col-md-4">
              <div class="preview" id="preview1"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">

        <button type="button" id="crop1" class="btn btn-primary">Crop</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

      </div>
    </div>
  </div>
</div>
</body>


<!-- Mirrored from portotheme.com/html/wolmart/my-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 05 Nov 2021 04:58:49 GMT -->

</html>